{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container mt-5">
  <h2 class="mb-4">Edit Your Request</h2>

  <form method="POST" action="{% url 'edit_request' request_obj.id %}">
    {% csrf_token %}

    <div class="mb-3">
      <label for="title" class="form-label">Title</label>
      <input
        type="text"
        class="form-control"
        id="title"
        name="title"
        value="{{ request_obj.title }}"
        required
      >
    </div>

    <div class="mb-3">
      <label for="description" class="form-label">Description</label>
      <textarea
        class="form-control"
        id="description"
        name="description"
        rows="4"
        required
      >{{ request_obj.description }}</textarea>
    </div>

    <div class="mb-3">
      <label for="category" class="form-label">Category</label>
      <select class="form-select" id="category" name="category" required>
        {% for value, label in request_obj.CATEGORY_CHOICES %}
          <option value="{{ value }}" {% if request_obj.category == value %}selected{% endif %}>{{ label }}</option>
        {% endfor %}
      </select>
    </div>

    <div class="mb-3">
      <label for="priority" class="form-label">Priority</label>
      <select class="form-select" id="priority" name="priority" required>
        {% for value, label in request_obj.PRIORITY_CHOICES %}
          <option value="{{ value }}" {% if request_obj.priority == value %}selected{% endif %}>{{ label }}</option>
        {% endfor %}
      </select>
    </div>

    <div class="d-flex justify-content-between align-items-center mt-4">
      <div>
        <button type="submit" class="btn btn-primary">Update Request</button>
        <a href="{% url 'premium_dashboard' %}" class="btn btn-secondary">Cancel</a>
      </div>

      <form method="POST" action="{% url 'delete_request' request_obj.id %}">
        {% csrf_token %}
        <button type="submit" class="btn btn-danger">Delete Request</button>
      </form>
    </div>
  </form>
</div>
{% endblock %}
